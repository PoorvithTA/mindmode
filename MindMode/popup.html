<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MindMode</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
<div id="app">

  <!-- ═══ PERSISTENT HEADER (all pages) ════════════════════════ -->
  <header class="popup-header">
    <div class="header-left">
      <div class="logo-wrap">
        <span class="material-symbols-rounded logo-icon">psychology</span>
      </div>
      <div>
        <div class="logo-text">MindMode</div>
        <div class="logo-sub">Smart Browser Controller</div>
      </div>
    </div>
    <div class="header-right">
      <button id="aboutBtn" class="hdr-btn" title="About">
        <span class="material-symbols-rounded">info</span>
      </button>
      <button id="settingsBtn" class="hdr-btn" title="Settings">
        <span class="material-symbols-rounded">settings</span>
      </button>
    </div>
  </header>

  <!-- ═══ MAIN VIEW ════════════════════════════════════════════ -->
  <div id="mainView">

    <div id="sessionBanner" class="session-banner hidden">
      <div class="sb-top">
        <div class="sb-mode-info">
          <span class="material-symbols-rounded sb-icon" id="sbIcon">timer</span>
          <div>
            <div class="sb-label" id="sessionModeLabel">Study Mode</div>
            <div class="sb-sublabel">Session in progress</div>
          </div>
        </div>
        <span id="sessionTimer" class="sb-timer">45:00</span>
      </div>
      <div class="sb-bar-track"><div id="sessionBar" class="sb-bar-fill"></div></div>
      <div class="sb-stats-row">
        <div class="sb-mini-stat"><span class="material-symbols-rounded">public</span><span id="lSites">0</span> sites</div>
        <div class="sb-mini-stat"><span class="material-symbols-rounded">block</span><span id="lBlocked">0</span> blocked</div>
        <div class="sb-mini-stat focus-stat"><span class="material-symbols-rounded">bolt</span><span id="lFocus">100</span>% focus</div>
      </div>
      <button id="endSessionBtn" class="end-btn">
        <span class="material-symbols-rounded">stop_circle</span>End Session
      </button>
    </div>

    <div class="modes-section">
      <div class="section-label"><span class="material-symbols-rounded">tune</span>Choose Mode</div>
      <div class="mode-grid">

        <button class="mode-card" data-mode="study">
          <div class="mc-top"><div class="mc-icon study"><i class="bi bi-book-half"></i></div><span class="mc-badge">Popular</span></div>
          <div class="mc-name">Study</div>
          <div class="mc-desc">AI-blocks social &amp; OTT, hides YouTube, limits tabs</div>
          <div class="mc-tags">
            <span><span class="material-symbols-rounded">auto_awesome</span>AI Block</span>
            <span><span class="material-symbols-rounded">tab</span>Tab limit</span>
          </div>
        </button>

        <button class="mode-card" data-mode="deepwork">
          <div class="mc-top"><div class="mc-icon deepwork"><i class="bi bi-laptop"></i></div></div>
          <div class="mc-name">Deep Work</div>
          <div class="mc-desc">Whitelist-only browsing, mutes background tabs</div>
          <div class="mc-tags">
            <span><span class="material-symbols-rounded">checklist</span>Whitelist</span>
            <span><span class="material-symbols-rounded">volume_off</span>Mute</span>
          </div>
        </button>

        <button class="mode-card" data-mode="chill">
          <div class="mc-top"><div class="mc-icon chill"><i class="bi bi-moon-stars-fill"></i></div></div>
          <div class="mc-name">Chill</div>
          <div class="mc-desc">Soft visual filter, session timer, usage summary only</div>
          <div class="mc-tags">
            <span><span class="material-symbols-rounded">palette</span>Soft UI</span>
            <span><span class="material-symbols-rounded">bar_chart</span>Stats</span>
          </div>
        </button>

        <button class="mode-card" data-mode="free">
          <div class="mc-top"><div class="mc-icon free"><i class="bi bi-controller"></i></div></div>
          <div class="mc-name">Free</div>
          <div class="mc-desc">No restrictions. All sites allowed, no tracking</div>
          <div class="mc-tags">
            <span><span class="material-symbols-rounded">lock_open</span>Unrestricted</span>
          </div>
        </button>

      </div>
    </div>

    <div id="durationPicker" class="duration-panel hidden">
      <div class="dp-header"><span class="material-symbols-rounded">schedule</span>Session Duration</div>
      <div class="dp-pills">
        <button class="dp-pill" data-min="25">25 min</button>
        <button class="dp-pill active" data-min="45">45 min</button>
        <button class="dp-pill" data-min="60">1 hour</button>
        <button class="dp-pill" data-min="90">1.5 hrs</button>
        <button class="dp-pill" data-min="120">2 hrs</button>
        <button class="dp-pill" data-min="0"><span class="material-symbols-rounded" style="font-size:15px;vertical-align:middle">all_inclusive</span></button>
      </div>
      <button id="startSessionBtn" class="start-btn">
        <span class="material-symbols-rounded">play_circle</span>Start Session
      </button>
    </div>

  </div><!-- /#mainView -->

  <!-- ═══ SUMMARY VIEW ════════════════════════════════════════ -->
  <div id="summaryView" class="hidden">
    <div class="summary-hero">
      <div class="summary-icon-wrap">
        <span class="material-symbols-rounded summary-icon">celebration</span>
      </div>
      <h2 class="summary-title">Session Complete!</h2>
      <p class="summary-sub">Here's how you did</p>
    </div>
    <div class="score-ring-wrap">
      <canvas id="scoreRing" width="130" height="130"></canvas>
      <div class="score-center">
        <span id="focusScore" class="score-num">--</span>
        <span class="score-lbl">Focus Score</span>
      </div>
    </div>
    <div class="summary-stats-row">
      <div class="sum-stat"><span class="material-symbols-rounded">timer</span><span id="sDuration" class="sum-val">--</span><label>minutes</label></div>
      <div class="sum-stat"><span class="material-symbols-rounded">public</span><span id="sSites" class="sum-val">--</span><label>sites</label></div>
      <div class="sum-stat"><span class="material-symbols-rounded">block</span><span id="sDistractions" class="sum-val">--</span><label>blocked</label></div>
    </div>
    <div id="topSitesList" class="top-sites-wrap"></div>
    <button id="dismissSummary" class="start-btn" style="margin-top:8px">
      <span class="material-symbols-rounded">add_circle</span>New Session
    </button>
  </div><!-- /#summaryView -->

  <!-- ═══ SETTINGS VIEW ══════════════════════════════════════ -->
  <div id="settingsView" class="hidden">

    <div class="view-header">
      <button id="settingsBackBtn" class="back-btn"><span class="material-symbols-rounded">arrow_back</span></button>
      <div><div class="view-title">Settings</div><div class="view-sub">Customize your experience</div></div>
    </div>

    <!-- AI Smart Blocklist -->
    <div class="settings-section ai-section">
      <div class="ai-section-header">
        <div class="settings-section-label">
          <span class="material-symbols-rounded">auto_awesome</span>AI Smart Blocklist
        </div>
        <button id="refreshBlocklistBtn" class="ai-pill-btn">
          <span class="material-symbols-rounded" id="refreshIcon">refresh</span>
          <span id="refreshBtnText">Refresh</span>
        </button>
      </div>
      <p class="settings-hint">Claude AI maintains a categorized blocklist — social media, OTT/streaming, gaming, news &amp; more. Used in Study &amp; Deep Work modes.</p>

      <div id="aiLoadingRow" class="ai-loading-row hidden">
        <div class="ai-loader-dots"><span></span><span></span><span></span></div>
        <span>Claude is generating your blocklist…</span>
      </div>

      <div id="aiErrorRow" class="ai-error-row hidden">
        <span class="material-symbols-rounded">error</span>
        <span id="aiErrorText">Something went wrong</span>
      </div>

      <div id="blocklistCategories" class="blocklist-cats"></div>

      <div class="ai-meta-row">
        <span class="material-symbols-rounded">shield</span>
        <span id="aiMetaText">AI blocklist loaded locally · never sent to cloud</span>
      </div>
    </div>

    <!-- Deep Work Whitelist -->
    <div class="settings-section">
      <div class="settings-section-label"><span class="material-symbols-rounded">checklist</span>Deep Work Whitelist</div>
      <p class="settings-hint">Sites allowed during Deep Work mode</p>
      <div id="whitelistTags" class="tag-cloud"></div>
      <div class="input-row">
        <input id="whitelistInput" type="text" class="text-input" placeholder="e.g. notion.so" />
        <button id="addWhitelistBtn" class="icon-action-btn"><span class="material-symbols-rounded">add</span></button>
      </div>
    </div>

    <!-- Max Tabs -->
    <div class="settings-section">
      <div class="settings-section-label"><span class="material-symbols-rounded">tab</span>Max Tabs Per Mode</div>
      <div class="max-tabs-grid">
        <div class="mt-row"><i class="bi bi-book-half"></i><span>Study Mode</span><input id="maxTabsStudy" type="number" class="num-input" min="1" max="30" value="8" /><span class="mt-unit">tabs</span></div>
        <div class="mt-row"><i class="bi bi-laptop"></i><span>Deep Work</span><input id="maxTabsDeepwork" type="number" class="num-input" min="1" max="30" value="5" /><span class="mt-unit">tabs</span></div>
      </div>
    </div>

    <!-- Auto Schedule -->
    <div class="settings-section">
      <div class="settings-section-label"><span class="material-symbols-rounded">schedule</span>Auto Schedule</div>
      <p class="settings-hint">Automatically switch modes at set times daily</p>
      <div id="scheduleList" class="schedule-list"></div>
      <button id="addScheduleBtn" class="outline-action-btn"><span class="material-symbols-rounded">add</span>Add Schedule Entry</button>
    </div>

    <button id="saveSettingsBtn" class="start-btn" style="margin-top:4px">
      <span class="material-symbols-rounded">save</span>Save Settings
    </button>

  </div><!-- /#settingsView -->

  <!-- ═══ ABOUT VIEW ═════════════════════════════════════════ -->
  <div id="aboutView" class="hidden">

    <div class="view-header">
      <button id="aboutBackBtn" class="back-btn"><span class="material-symbols-rounded">arrow_back</span></button>
      <div><div class="view-title">About MindMode</div><div class="view-sub">Version 1.0.0</div></div>
    </div>

    <div class="about-hero-card">
      <div class="about-logo-row">
        <div class="about-logo-icon"><span class="material-symbols-rounded">psychology</span></div>
        <div>
          <div class="about-name">MindMode</div>
          <div class="about-tagline">Smart Browser State Controller</div>
        </div>
      </div>
      <p class="about-desc">
        MindMode changes how your entire browser behaves based on your mental state —
        not just blocking sites, but shifting your whole digital environment.
        Think Digital Wellbeing × Focus × Smart Environment.
      </p>
      <div class="about-privacy-badge">
        <span class="material-symbols-rounded">shield</span>
        100% Local — No cloud, no tracking, no login
      </div>
    </div>

    <div class="about-modes-section">
      <div class="settings-section-label"><span class="material-symbols-rounded">apps</span>What Each Mode Does</div>
      <div class="about-mode-list">
        <div class="about-mode-row">
          <div class="about-mode-icon study"><i class="bi bi-book-half"></i></div>
          <div class="about-mode-info"><strong>Study</strong><span>AI-blocked social &amp; OTT, hides YouTube feed, limits tabs</span></div>
        </div>
        <div class="about-mode-row">
          <div class="about-mode-icon deepwork"><i class="bi bi-laptop"></i></div>
          <div class="about-mode-info"><strong>Deep Work</strong><span>Whitelist-only sites, auto-closes idle tabs, mutes background</span></div>
        </div>
        <div class="about-mode-row">
          <div class="about-mode-icon chill"><i class="bi bi-moon-stars-fill"></i></div>
          <div class="about-mode-info"><strong>Chill</strong><span>Soft visual filter, session timer, usage summary at end</span></div>
        </div>
        <div class="about-mode-row">
          <div class="about-mode-icon free"><i class="bi bi-controller"></i></div>
          <div class="about-mode-info"><strong>Free</strong><span>No restrictions, no tracking, everything allowed</span></div>
        </div>
      </div>
    </div>

    <div class="about-links-section">
      <div class="settings-section-label"><span class="material-symbols-rounded">link</span>Links</div>
      <div class="about-links-grid">
        <a href="https://github.com/PoorvithTA" target="_blank" class="about-link-card">
          <i class="bi bi-github"></i><span>GitHub</span><span class="material-symbols-rounded open-icon">open_in_new</span>
        </a>
        <a href="https://www.youtube.com/@PoorvithsLife_Official/" target="_blank" class="about-link-card">
          <i class="bi bi-youtube"></i><span>YouTube</span><span class="material-symbols-rounded open-icon">open_in_new</span>
        </a>
        <a href="https://github.com/PoorvithTA" target="_blank" class="about-link-card">
          <i class="bi bi-bug"></i><span>Report Bug</span><span class="material-symbols-rounded open-icon">open_in_new</span>
        </a>
        <a href="https://github.com/PoorvithTA" target="_blank" class="about-link-card">
          <i class="bi bi-person-fill"></i><span>Portfolio</span><span class="material-symbols-rounded open-icon">open_in_new</span>
        </a>
      </div>
    </div>

  </div><!-- /#aboutView -->

  <!-- ═══ PERSISTENT FOOTER (all pages) ════════════════════════ -->
  <footer class="popup-footer">
    <span>Built with</span>
    <span class="material-symbols-rounded footer-heart">favorite</span>
    <span>by <a href="https://github.com/PoorvithTA" target="_blank" class="footer-link">Poorvith T A</a></span>
    <span class="footer-dot">•</span>
    <a href="https://www.youtube.com/@PoorvithsLife_Official/" target="_blank" class="footer-link">
      <i class="bi bi-youtube"></i> YouTube
    </a>
    <span class="footer-dot">•</span>
    <a href="https://github.com/PoorvithTA" target="_blank" class="footer-link">
      <i class="bi bi-github"></i> GitHub
    </a>
  </footer>

</div><!-- /#app -->
<script src="popup.js"></script>
</body>
</html>
